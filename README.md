# ğŸ” PassGen - Macç»ˆç«¯å¯†ç ç”Ÿæˆå™¨/ç®¡ç†å™¨

ç°ä»£åŒ–çš„å¯†ç ç”Ÿæˆå’Œç®¡ç†å·¥å…·CLIï¼Œæ”¯æŒ Touch ID ç”Ÿç‰©è¯†åˆ«è®¤è¯ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ”‘ **æ™ºèƒ½å¯†ç ç”Ÿæˆ**ï¼šå¯è‡ªå®šä¹‰é•¿åº¦ã€å­—ç¬¦é›†çš„å®‰å…¨å¯†ç 
- ğŸ’¾ **åŠ å¯†å­˜å‚¨**ï¼šAES-GCM åŠ å¯†ï¼ŒPBKDF2 å¯†é’¥æ´¾ç”Ÿ
- ğŸ‘† **Touch ID è®¤è¯**ï¼šä¾¿æ·çš„ç”Ÿç‰©è¯†åˆ«è®¤è¯ï¼Œè‡ªåŠ¨å›é€€
- ğŸ” **æ™ºèƒ½æœç´¢**ï¼šæ”¯æŒç½‘ç«™åã€ç”¨æˆ·åã€æ ‡ç­¾ã€å¤‡æ³¨æœç´¢
- ğŸ“‹ **å‰ªè´´æ¿é›†æˆ**ï¼šè‡ªåŠ¨å¤åˆ¶ï¼Œ30ç§’åå®‰å…¨æ¸…é™¤
- âš¡ **ä¼šè¯ç®¡ç†**ï¼š5åˆ†é’Ÿä¼šè¯ç¼“å­˜ï¼Œå‡å°‘é‡å¤è®¤è¯

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**ï¼šmacOS 10.13+ ï¼ˆTouch ID åŠŸèƒ½éœ€è¦æ”¯æŒ Touch ID çš„ Macï¼‰
- **Python**ï¼šPython 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **ä¾èµ–**ï¼šè‡ªåŠ¨å®‰è£…è„šæœ¬ä¼šæ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€ä¾èµ–

**å¦‚æœæ²¡æœ‰ Python**ï¼š
```bash
# ä½¿ç”¨ Homebrew å®‰è£…ï¼ˆæ¨èï¼‰
brew install python@3.11

# æˆ–ä»å®˜ç½‘ä¸‹è½½å®‰è£…
# https://www.python.org/downloads/
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url> pass-gen
cd pass-gen

# è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
./install.sh
```

è‡ªåŠ¨å®‰è£…è„šæœ¬ä¼šï¼š
- æ£€æŸ¥ Python 3.8+ ç¯å¢ƒ
- è‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
- å®‰è£…æ‰€æœ‰ä¾èµ–
- è®¾ç½® PATH ç¯å¢ƒå˜é‡
- æµ‹è¯•å®‰è£…ç»“æœ

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url> pass-gen
cd pass-gen

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# è®¾ç½®å¯æ‰§è¡Œæƒé™
chmod +x scripts/passgen
chmod +x passgen.py

# æ·»åŠ åˆ° PATHï¼ˆå¯é€‰ï¼‰
echo 'export PATH="$(pwd)/scripts:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

### åˆå§‹åŒ–

```bash
# åˆå§‹åŒ–å¯†ç ç®¡ç†å™¨ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
passgen init

# è®¾ç½®ä¸»å¯†ç ï¼ŒTouch ID å°†è‡ªåŠ¨å¯ç”¨
```

### å¼€å§‹ä½¿ç”¨

```bash
# ç”Ÿæˆå¯†ç ï¼ˆé»˜è®¤åŠŸèƒ½ï¼‰
passgen

# æŸ¥çœ‹å¯†ç åº“ï¼ˆé¦–æ¬¡ä¼šè¦æ±‚å¯†ç ï¼Œä¹‹åä½¿ç”¨ Touch IDï¼‰
passgen list

# æœç´¢å¯†ç 
passgen search github
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¯†ç ç”Ÿæˆ

```bash
# ç”Ÿæˆé»˜è®¤å¯†ç ï¼ˆ16ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç¬¦å·ï¼‰
passgen

# è‡ªå®šä¹‰å¯†ç 
passgen -l 20                    # 20ä½å¯†ç 
passgen --no-symbols             # ä¸åŒ…å«ç¬¦å·
passgen --custom-symbols "!@#$"  # åªä½¿ç”¨æŒ‡å®šçš„ç¬¦å·
passgen --exclude "0oO1lI"       # æ’é™¤å®¹æ˜“æ··æ·†çš„å­—ç¬¦
passgen --count 3                # ç”Ÿæˆ3ä¸ªå¯†ç 
passgen --no-save               # åªç”Ÿæˆä¸ä¿å­˜

# æŸ¥çœ‹å¸®åŠ©
passgen --help
```

### å¯†ç ç®¡ç†

```bash
# åˆå§‹åŒ–ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
passgen init

# æŸ¥çœ‹æ‰€æœ‰å¯†ç ï¼ˆæ”¯æŒäº¤äº’å¼é€‰æ‹©å’Œå¤åˆ¶ï¼‰
passgen list

# ç›´æ¥å¤åˆ¶æŒ‡å®šåºå·çš„å¯†ç 
passgen list -c 3

# æœç´¢å¯†ç 
passgen search github
passgen search -c github    # æœç´¢å¹¶å¤åˆ¶

# æ·»åŠ æ–°å¯†ç ï¼ˆæ”¯æŒè‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨è¾“å…¥ï¼‰
passgen add

# ç¼–è¾‘å¯†ç æ¡ç›®ï¼ˆä½¿ç”¨åºå·ï¼‰
passgen edit 1

# åˆ é™¤å¯†ç ï¼ˆä½¿ç”¨åºå·ï¼‰
passgen delete 2

# æŸ¥çœ‹è®¤è¯çŠ¶æ€
passgen status

# é…ç½®ç®¡ç†
passgen config                      # æŸ¥çœ‹å½“å‰é…ç½®
passgen config --session-timeout 600   # è®¾ç½®ä¼šè¯è¶…æ—¶ä¸º10åˆ†é’Ÿ
passgen config --clipboard-timeout 60  # è®¾ç½®å‰ªè´´æ¿1åˆ†é’Ÿåæ¸…é™¤
passgen config --password-length 20    # è®¾ç½®é»˜è®¤å¯†ç é•¿åº¦ä¸º20
passgen config --symbols "!@#$%"       # è®¾ç½®é»˜è®¤ç‰¹æ®Šå­—ç¬¦é›†
passgen config --reset                 # é‡ç½®æ‰€æœ‰é…ç½®åˆ°é»˜è®¤å€¼

# ç³»ç»Ÿé‡ç½®
passgen reset                       # å®Œå…¨é‡ç½®ï¼ˆæ•°æ®åº“+é’¥åŒ™ä¸²+é…ç½®ï¼‰
passgen reset --config-only         # ä»…é‡ç½®é…ç½®æ–‡ä»¶
passgen reset --force               # è·³è¿‡ç¡®è®¤ç›´æ¥é‡ç½®

# è·å–å¸®åŠ©
passgen --help                      # æŸ¥çœ‹è¯¦ç»†ä½¿ç”¨æŒ‡å—å’Œæ‰€æœ‰å‘½ä»¤
passgen <command> --help            # æŸ¥çœ‹ç‰¹å®šå‘½ä»¤çš„è¯¦ç»†é€‰é¡¹
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **å†›ç”¨çº§åŠ å¯†**ï¼šAES-256-GCM å¯¹ç§°åŠ å¯†ç®—æ³•
- **å¯†é’¥æ´¾ç”Ÿ**ï¼šPBKDF2-HMAC-SHA256ï¼Œ100,000æ¬¡è¿­ä»£
- **æ–‡ä»¶æƒé™**ï¼šæ•°æ®åº“æ–‡ä»¶æƒé™è®¾ä¸º 600ï¼ˆä»…ç”¨æˆ·å¯è¯»å†™ï¼‰
- **Touch ID é›†æˆ**ï¼šç”Ÿç‰©è¯†åˆ«è®¤è¯ï¼Œå¯†ç è‡ªåŠ¨ä¿å­˜åˆ°ç³»ç»Ÿé’¥åŒ™ä¸²
- **ä¼šè¯ç®¡ç†**ï¼š5åˆ†é’Ÿè‡ªåŠ¨è¶…æ—¶ï¼Œå®‰å…¨å†…å­˜æ¸…ç†
- **å‰ªè´´æ¿å®‰å…¨**ï¼š30ç§’åè‡ªåŠ¨æ¸…é™¤æ•æ„Ÿæ•°æ®

## ğŸ“ æ–‡ä»¶è¯´æ˜

```
pass-gen/
â”œâ”€â”€ install.sh              # è‡ªåŠ¨å®‰è£…è„šæœ¬
â”œâ”€â”€ uninstall.sh            # å¸è½½è„šæœ¬
â”œâ”€â”€ passgen.py              # ä¸»ç¨‹åºï¼ˆç»Ÿä¸€CLIå·¥å…·ï¼‰
â”œâ”€â”€ scripts/passgen         # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ enhanced_auth.py    # Touch ID å¢å¼ºè®¤è¯
â”‚   â”œâ”€â”€ storage.py          # AES åŠ å¯†å­˜å‚¨
â”‚   â”œâ”€â”€ generator.py        # å¯†ç ç”Ÿæˆç®—æ³•
â”‚   â””â”€â”€ clipboard.py        # å®‰å…¨å‰ªè´´æ¿ç®¡ç†
â”œâ”€â”€ utils/config.py         # é…ç½®ç®¡ç†
â””â”€â”€ requirements.txt        # Python ä¾èµ–
```

## ğŸ› ï¸ é…ç½®å’Œå­˜å‚¨

### å­˜å‚¨æ–‡ä»¶ä½ç½®

PassGen ä½¿ç”¨ä»¥ä¸‹æ–‡ä»¶å­˜å‚¨æ•°æ®ï¼š

```
~/.passgen.db              # åŠ å¯†çš„å¯†ç æ•°æ®åº“ï¼ˆä¸»è¦æ–‡ä»¶ï¼‰
~/.passgen_config.json     # ç³»ç»Ÿé…ç½®æ–‡ä»¶
ç³»ç»Ÿé’¥åŒ™ä¸²                  # Touch ID ç›¸å…³çš„ä¸»å¯†ç ï¼ˆmacOS Keychainï¼‰
```

### é…ç½®æ–‡ä»¶è¯´æ˜

ç³»ç»Ÿé…ç½®ä½äº `~/.passgen_config.json`ï¼š

```json
{
  "default_password_length": 16,
  "default_use_uppercase": true,
  "default_use_lowercase": true,
  "default_use_digits": true,
  "default_use_symbols": true,
  "default_symbols": "!@#$%^&*()_+-=[]{}|;:,.<>?",
  "session_timeout_seconds": 300,
  "auto_clear_clipboard_seconds": 30,
  "show_password_strength": true
}
```

### âš¡ ä¼šè¯ç®¡ç†ä¼˜åŒ–

**ç‰ˆæœ¬ 2.1 æ–°åŠŸèƒ½**ï¼šä¼˜åŒ–äº† Touch ID ä¼šè¯ç®¡ç†ï¼Œè§£å†³æ¯æ¬¡æ“ä½œéƒ½éœ€è¦è®¤è¯çš„é—®é¢˜ï¼š

#### é—®é¢˜ä¿®å¤
- **å…¨å±€ä¼šè¯å®ä¾‹**ï¼šä½¿ç”¨å•ä¸€çš„è®¤è¯ç®¡ç†å™¨å®ä¾‹ï¼Œç¡®ä¿ä¼šè¯çŠ¶æ€åœ¨å¤šæ¬¡æ“ä½œé—´ä¿æŒ
- **é…ç½®åŒ–è¶…æ—¶**ï¼šå¯é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰ä¼šè¯è¶…æ—¶æ—¶é—´
- **æ™ºèƒ½ç¼“å­˜**ï¼šåœ¨ä¼šè¯æœ‰æ•ˆæœŸå†…ï¼Œåç»­æ“ä½œå°†è‡ªåŠ¨ä½¿ç”¨ç¼“å­˜çš„è®¤è¯ä¿¡æ¯

#### é…ç½®ä¼šè¯è¶…æ—¶
```bash
# æŸ¥çœ‹å½“å‰ä¼šè¯é…ç½®
passgen config

# è®¾ç½®ä¼šè¯è¶…æ—¶ä¸º10åˆ†é’Ÿï¼ˆ600ç§’ï¼‰
passgen config --session-timeout 600

# è®¾ç½®ä¼šè¯è¶…æ—¶ä¸º1å°æ—¶ï¼ˆ3600ç§’ï¼‰
passgen config --session-timeout 3600

# ç¦ç”¨ä¼šè¯ç¼“å­˜ï¼ˆæ¯æ¬¡éƒ½è®¤è¯ï¼‰
passgen config --session-timeout 0
```

#### ä¼šè¯è¡Œä¸ºè¯´æ˜
1. **é¦–æ¬¡è®¤è¯**ï¼šä½¿ç”¨ Touch ID æˆ–å¯†ç è¿›è¡Œèº«ä»½éªŒè¯
2. **ä¼šè¯ç¼“å­˜**ï¼šè®¤è¯æˆåŠŸåï¼Œä¼šè¯ä¿¡æ¯ç¼“å­˜åœ¨å†…å­˜ä¸­
3. **åç»­æ“ä½œ**ï¼šåœ¨ä¼šè¯æœ‰æ•ˆæœŸå†…ï¼Œæ— éœ€é‡å¤è®¤è¯
4. **è‡ªåŠ¨è¿‡æœŸ**ï¼šè¶…è¿‡é…ç½®çš„è¶…æ—¶æ—¶é—´åï¼Œéœ€è¦é‡æ–°è®¤è¯
5. **è¿›ç¨‹éš”ç¦»**ï¼šæ¯ä¸ª CLI è¿›ç¨‹ç‹¬ç«‹ç®¡ç†ä¼šè¯ï¼ˆç¬¦åˆå®‰å…¨æœ€ä½³å®è·µï¼‰

#### æŸ¥çœ‹ä¼šè¯çŠ¶æ€
```bash
# æŸ¥çœ‹å½“å‰è®¤è¯çŠ¶æ€å’Œå‰©ä½™ä¼šè¯æ—¶é—´
passgen status
```

### ğŸ“± iCloud å®æ—¶åŒæ­¥è®¾ç½®

å¦‚æœæ‚¨å¸Œæœ›åœ¨å¤šå° Mac ä¹‹é—´åŒæ­¥å¯†ç åº“ï¼Œå¯ä»¥ä½¿ç”¨ iCloud Driveï¼š

#### æ–¹æ³•1ï¼šç§»åŠ¨åˆ° iCloud Driveï¼ˆæ¨èï¼‰

```bash
# 1. ç¡®ä¿ iCloud Drive å·²å¯ç”¨
# ç³»ç»Ÿåå¥½è®¾ç½® â†’ Apple ID â†’ iCloud â†’ iCloud Drive âœ“

# 2. åˆ›å»º PassGen ä¸“ç”¨æ–‡ä»¶å¤¹
mkdir -p ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen

# 3. ç§»åŠ¨ç°æœ‰æ•°æ®åº“åˆ° iCloudï¼ˆå¦‚æœå·²å­˜åœ¨ï¼‰
mv ~/.passgen.db ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/

# 4. åˆ›å»ºè½¯é“¾æ¥ï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db

# 5. éªŒè¯é“¾æ¥
ls -la ~/.passgen.db
# åº”è¯¥æ˜¾ç¤º: ~/.passgen.db -> ~/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db
```

#### æ–¹æ³•2ï¼šä»æ–°åˆå§‹åŒ–åˆ° iCloud

```bash
# 1. åˆ é™¤ç°æœ‰æ•°æ®åº“ï¼ˆâš ï¸ æ³¨æ„å¤‡ä»½ï¼‰
rm ~/.passgen.db

# 2. åˆ›å»º iCloud æ–‡ä»¶å¤¹
mkdir -p ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen

# 3. åˆ›å»ºè½¯é“¾æ¥æŒ‡å‘ iCloudï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db

# 4. é‡æ–°åˆå§‹åŒ–
passgen init
```

#### éªŒè¯åŒæ­¥çŠ¶æ€

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨ iCloud ä¸­
ls -la ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/

# æ£€æŸ¥è½¯é“¾æ¥æ˜¯å¦æ­£ç¡®
readlink ~/.passgen.db

# æŸ¥çœ‹ iCloud åŒæ­¥çŠ¶æ€ï¼ˆæ–‡ä»¶åååº”è¯¥æœ‰äº‘æœµå›¾æ ‡ï¼‰
open ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/
```

### ğŸ”„ å¤šè®¾å¤‡ä½¿ç”¨è¯¦ç»†æŒ‡å—

#### ç¬¬äºŒå° Mac å®Œæ•´è®¾ç½®æ­¥éª¤

**âš ï¸ é‡è¦è­¦å‘Š**ï¼š
- `passgen init` ä¼šåœ¨ `~/.passgen.db` åˆ›å»ºæ–°çš„æ•°æ®åº“æ–‡ä»¶
- åˆ›å»ºè½¯é“¾æ¥å‰**å¿…é¡»å…ˆåˆ é™¤**è¿™ä¸ªæ–‡ä»¶ï¼Œå¦åˆ™ä¼šæœ‰æ–‡ä»¶åå†²çª
- åˆ é™¤çš„æ˜¯ç©ºçš„æ–°æ•°æ®åº“ï¼Œä¸ä¼šå½±å“ iCloud ä¸­çš„åŸå§‹æ•°æ®

**é‡è¦æ¦‚å¿µ**ï¼š
- ğŸ“ **æ•°æ®åº“æ–‡ä»¶**ï¼šå­˜å‚¨åœ¨ iCloud ä¸­ï¼Œå¯ä»¥åœ¨å¤šå°è®¾å¤‡é—´å…±äº«
- ğŸ” **é’¥åŒ™ä¸²å’Œ Touch ID**ï¼šæ¯å° Mac ç‹¬ç«‹ï¼Œä¸ä¼šåŒæ­¥
- ğŸ”‘ **ä¸»å¯†ç **ï¼šæ‰€æœ‰è®¾å¤‡å¿…é¡»ä½¿ç”¨ç›¸åŒçš„ä¸»å¯†ç 

**å®Œæ•´è®¾ç½®æµç¨‹**ï¼š

```bash
# ç¬¬äºŒå° Mac ä¸Šçš„è®¾ç½®æ­¥éª¤ï¼š

# æ­¥éª¤1ï¼šç¡®ä¿ iCloud åŒæ­¥å®Œæˆ
ls -la "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/"
# ç¡®è®¤èƒ½çœ‹åˆ° .passgen.db æ–‡ä»¶

# æ­¥éª¤2ï¼šåˆ›å»ºè½¯é“¾æ¥
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db

# æ­¥éª¤3ï¼šé¦–æ¬¡è®¤è¯ï¼ˆè®¾ç½®é’¥åŒ™ä¸²ï¼‰
passgen list
# ä¼šæç¤ºè¾“å…¥ä¸»å¯†ç ï¼ˆä½¿ç”¨ä¸ç¬¬ä¸€å° Mac ç›¸åŒçš„å¯†ç ï¼‰
# è¾“å…¥æ­£ç¡®åï¼Œä¸»å¯†ç ä¼šä¿å­˜åˆ°æœ¬æœºé’¥åŒ™ä¸²ï¼ŒTouch ID è‡ªåŠ¨å¯ç”¨

# éªŒè¯è®¾ç½®æˆåŠŸ
passgen status  # æŸ¥çœ‹ Touch ID çŠ¶æ€
```

**å¦‚æœé‡åˆ°"å­˜å‚¨æ–‡ä»¶ä¸å­˜åœ¨"é”™è¯¯**ï¼š

```bash
# è¿™é€šå¸¸æ˜¯å› ä¸ºé’¥åŒ™ä¸²ä¸­æ²¡æœ‰ä¸»å¯†ç è®°å½•ï¼Œè§£å†³æ–¹æ³•ï¼š

# æ–¹æ³•1ï¼šè¿è¡Œä»»ä½•éœ€è¦è®¤è¯çš„å‘½ä»¤æ¥è§¦å‘å¯†ç è®¾ç½®
passgen list  # è¾“å…¥ä¸»å¯†ç åä¼šè‡ªåŠ¨ä¿å­˜åˆ°é’¥åŒ™ä¸²

# æ–¹æ³•2ï¼šå¦‚æœæ–¹æ³•1ä¸å·¥ä½œï¼Œæ‰‹åŠ¨åˆå§‹åŒ–é’¥åŒ™ä¸²
passgen init  # è¾“å…¥ç›¸åŒçš„ä¸»å¯†ç ï¼ˆè¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ~/.passgen.db æ–‡ä»¶ï¼‰
rm ~/.passgen.db  # âš ï¸ é‡è¦ï¼šåˆ é™¤åˆšåˆ›å»ºçš„ç©ºæ•°æ®åº“æ–‡ä»¶ï¼Œé¿å…ä¸è½¯é“¾æ¥å†²çª
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db
```

#### å¤šè®¾å¤‡ä½¿ç”¨æ³¨æ„äº‹é¡¹

1. **Touch ID ç‹¬ç«‹æ€§**ï¼šæ¯å°è®¾å¤‡çš„ Touch ID è®¾ç½®ç‹¬ç«‹ï¼Œéœ€è¦åœ¨æ¯å° Mac ä¸Šåˆ†åˆ«è¿›è¡Œé¦–æ¬¡å¯†ç è®¤è¯

2. **ä¸»å¯†ç ä¸€è‡´æ€§**ï¼šæ‰€æœ‰è®¾å¤‡å¿…é¡»ä½¿ç”¨ç›¸åŒçš„ä¸»å¯†ç ï¼Œå¦åˆ™æ— æ³•è§£å¯†æ•°æ®åº“

3. **åŒæ­¥å»¶è¿Ÿ**ï¼šiCloud åŒæ­¥å¯èƒ½æœ‰å‡ ç§’åˆ°å‡ åˆ†é’Ÿçš„å»¶è¿Ÿï¼Œå»ºè®®ï¼š
   - æ·»åŠ å¯†ç åç­‰å¾…åŒæ­¥å®Œæˆå†åœ¨å…¶ä»–è®¾å¤‡ä½¿ç”¨
   - é¿å…åŒæ—¶åœ¨å¤šå°è®¾å¤‡ä¸Šä¿®æ”¹å¯†ç åº“

4. **ç½‘ç»œè¦æ±‚**ï¼šéœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥æ‰èƒ½æ­£å¸¸åŒæ­¥

5. **å†²çªå¤„ç†**ï¼šå¦‚æœå‡ºç°åŒæ­¥å†²çªï¼ŒiCloud ä¼šä¿ç•™å¤šä¸ªç‰ˆæœ¬ï¼Œæ‰‹åŠ¨é€‰æ‹©éœ€è¦çš„ç‰ˆæœ¬

### ğŸ”’ å®‰å…¨å»ºè®®

- **å¯ç”¨é«˜çº§æ•°æ®ä¿æŠ¤**ï¼šåœ¨ iCloud è®¾ç½®ä¸­å¯ç”¨"é«˜çº§æ•°æ®ä¿æŠ¤"ä»¥è·å¾—ç«¯åˆ°ç«¯åŠ å¯†
- **å®šæœŸæœ¬åœ°å¤‡ä»½**ï¼šé™¤äº† iCloud åŒæ­¥ï¼Œå»ºè®®å®šæœŸæ‰‹åŠ¨å¤‡ä»½åˆ°å…¶ä»–ä½ç½®
- **éªŒè¯åŒæ­¥**ï¼šå®šæœŸæ£€æŸ¥å„è®¾å¤‡ä¸Šçš„æ•°æ®æ˜¯å¦ä¸€è‡´

```bash
# æ‰‹åŠ¨å¤‡ä»½å‘½ä»¤
cp ~/.passgen.db ~/Documents/passgen_backup_$(date +%Y%m%d).db
```

## ğŸ”§ æ•…éšœæ’é™¤

### Touch ID ä¸å·¥ä½œ

1. **æ£€æŸ¥ç³»ç»Ÿè®¾ç½®**ï¼šç³»ç»Ÿåå¥½è®¾ç½® â†’ è§¦æ§ ID ä¸å¯†ç 
2. **ç¡®è®¤ç¡¬ä»¶æ”¯æŒ**ï¼šéœ€è¦æ”¯æŒ Touch ID çš„ Mac
3. **é‡æ–°è®¤è¯**ï¼šåˆ é™¤æ—§æ•°æ®é‡æ–°åˆå§‹åŒ–

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ reset å‘½ä»¤ï¼ˆæ¨èï¼‰
passgen reset  # å®Œå…¨é‡ç½®ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€é’¥åŒ™ä¸²ã€é…ç½®

# æ–¹æ³•2ï¼šæ‰‹åŠ¨æ¸…ç†ï¼ˆä»…é™å•è®¾å¤‡ä½¿ç”¨ï¼‰
rm ~/.passgen.db
passgen init

# å¦‚æœä½¿ç”¨ iCloud åŒæ­¥ï¼Œè¯·æŒ‰ç…§å¤šè®¾å¤‡è®¾ç½®æŒ‡å—æ“ä½œ
```

### ä¾èµ–é—®é¢˜

```bash
# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### å¿˜è®°ä¸»å¯†ç 

âš ï¸ **é‡è¦**ï¼šå¿˜è®°ä¸»å¯†ç å°†æ— æ³•æ¢å¤æ•°æ®ï¼Œè¯·åŠ¡å¿…ç‰¢è®°æˆ–å®‰å…¨å¤‡ä»½ã€‚

```bash
# é‡æ–°å¼€å§‹ï¼ˆä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼‰
passgen reset  # æˆ–æ‰‹åŠ¨: rm ~/.passgen.db && passgen init
```

### æµ‹è¯•ç¬¬äºŒå°ç”µè„‘æµç¨‹

åœ¨å½“å‰ç”µè„‘ä¸Šæ¨¡æ‹Ÿç¬¬äºŒå°ç”µè„‘çš„è®¾ç½®æµç¨‹ï¼š

```bash
# 1. å®Œå…¨é‡ç½®å½“å‰ç¯å¢ƒ
passgen reset

# 2. ç¡®è®¤ iCloud æ–‡ä»¶å­˜åœ¨
ls -la "$HOME/Library/Mobile Documents/com~apple~CloudDocs/important/passgen/.passgen.db"

# 3. æŒ‰ç…§ç¬¬äºŒå° Mac è®¾ç½®æµç¨‹
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/important/passgen/.passgen.db" ~/.passgen.db

# 4. æµ‹è¯•è®¿é—®ï¼ˆè¾“å…¥åŸæ¥çš„ä¸»å¯†ç ï¼‰
passgen list

# 5. æ¢å¤æ­£å¸¸ä½¿ç”¨
passgen status  # éªŒè¯ Touch ID çŠ¶æ€
```

### å®Œå…¨å¸è½½ PassGen

å¦‚æœéœ€è¦å®Œå…¨ç§»é™¤ PassGenï¼š

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨å¸è½½è„šæœ¬ï¼ˆæ¨èï¼‰
./uninstall.sh

# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¸è½½
passgen reset          # æ¸…ç†æ‰€æœ‰æ•°æ®
cd ..                   # é€€å‡ºé¡¹ç›®ç›®å½•
rm -rf pass-gen         # åˆ é™¤é¡¹ç›®ç›®å½•
```

å¸è½½è„šæœ¬ä¼šæ¸…ç†ï¼š
- PassGen ç¨‹åºæ–‡ä»¶
- å¯†ç æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶
- é’¥åŒ™ä¸²ä¸­çš„ä¸»å¯†ç 
- PATH ç¯å¢ƒå˜é‡é…ç½®

### iCloud åŒæ­¥é—®é¢˜

#### è½¯é“¾æ¥æ–­å¼€ï¼ˆå¸¸è§é—®é¢˜ï¼‰

**é—®é¢˜**ï¼šè½¯é“¾æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼è‡´"å­˜å‚¨æ–‡ä»¶ä¸å­˜åœ¨"é”™è¯¯

**åŸå› **ï¼šå¦‚æœä½¿ç”¨ç›¸å¯¹è·¯å¾„åˆ›å»ºè½¯é“¾æ¥ï¼ˆå¦‚ `ln -s ./.passgen.db ~/.passgen.db`ï¼‰ï¼Œå½“ä»ä¸åŒç›®å½•è¿è¡Œ passgen æ—¶ï¼Œç›¸å¯¹è·¯å¾„ä¼šè§£æåˆ°é”™è¯¯ä½ç½®ï¼Œå¯¼è‡´è½¯é“¾æ¥æ–­å¼€ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šå§‹ç»ˆä½¿ç”¨ç»å¯¹è·¯å¾„åˆ›å»ºè½¯é“¾æ¥

#### è½¯é“¾æ¥æ–­å¼€
```bash
# æ£€æŸ¥è½¯é“¾æ¥çŠ¶æ€
ls -la ~/.passgen.db

# æ£€æŸ¥é“¾æ¥æ˜¯å¦æ–­å¼€
file ~/.passgen.db
# å¦‚æœæ˜¾ç¤º "broken symbolic link"ï¼Œè¯´æ˜é“¾æ¥æ–­å¼€

# ä¿®å¤æ–­å¼€çš„è½¯é“¾æ¥ï¼ˆåˆ é™¤å¹¶é‡æ–°åˆ›å»ºï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰
rm ~/.passgen.db
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db

# éªŒè¯ä¿®å¤ç»“æœ
file ~/.passgen.db
# åº”è¯¥æ˜¾ç¤º "data" è€Œä¸æ˜¯ "broken symbolic link"
```

#### åŒæ­¥å†²çª
```bash
# æŸ¥çœ‹æ˜¯å¦æœ‰å†²çªæ–‡ä»¶
ls -la ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/

# å¦‚æœæœ‰å¤šä¸ªç‰ˆæœ¬ï¼ˆå¦‚ .passgen.db å’Œ .passgen (Conflicted copy).dbï¼‰
# 1. å¤‡ä»½æ‰€æœ‰ç‰ˆæœ¬
cp ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/*.db ~/Documents/

# 2. é€‰æ‹©æœ€æ–°çš„ç‰ˆæœ¬é‡æ–°é“¾æ¥ï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰
rm ~/.passgen.db
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db
```

#### iCloud æœªåŒæ­¥
```bash
# å¼ºåˆ¶ iCloud åŒæ­¥
killall bird
open ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/

# æ£€æŸ¥ iCloud çŠ¶æ€
brctl log --wait --shorten
```

#### æ¢å¤æœ¬åœ°å‰¯æœ¬
```bash
# å¦‚æœ iCloud å‡ºç°é—®é¢˜ï¼Œæ¢å¤åˆ°æœ¬åœ°å­˜å‚¨
mv ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/.passgen.db ~/.passgen.db
rm ~/.passgen.db  # åˆ é™¤è½¯é“¾æ¥
mv ~/.passgen.db.backup ~/.passgen.db  # ä½¿ç”¨å¤‡ä»½
```

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬å·¥ä½œæµ
```bash
# æ—¥å¸¸å·¥ä½œæµ
passgen init                     # é¦–æ¬¡åˆå§‹åŒ–
passgen -l 20                   # ç”Ÿæˆ20ä½å¯†ç å¹¶ä¿å­˜
passgen list                    # Touch ID è®¤è¯ï¼ŒæŸ¥çœ‹å¯†ç åº“
passgen search work             # æœç´¢å·¥ä½œç›¸å…³å¯†ç 
passgen search -c work         # æœç´¢å¹¶å¤åˆ¶å¯†ç 

# é«˜çº§ç”¨æ³•
passgen --count 5 --no-symbols  # ç”Ÿæˆ5ä¸ªæ— ç¬¦å·å¯†ç 
passgen edit 1                  # ç¼–è¾‘ç¬¬1ä¸ªæ¡ç›®
passgen delete 3                # åˆ é™¤ç¬¬3ä¸ªæ¡ç›®
passgen status                  # æŸ¥çœ‹è®¤è¯å’Œç³»ç»ŸçŠ¶æ€
passgen config --session-timeout 600  # è®¾ç½®ä¼šè¯è¶…æ—¶ä¸º10åˆ†é’Ÿ
```

### iCloud åŒæ­¥å®Œæ•´è®¾ç½®æµç¨‹
```bash
# 1. åˆå§‹åŒ–ç³»ç»Ÿ
passgen init

# 2. æ·»åŠ ä¸€äº›æµ‹è¯•æ•°æ®
passgen add
passgen -l 16  # ç”Ÿæˆå¹¶ä¿å­˜å¯†ç 

# 3. è®¾ç½® iCloud åŒæ­¥
mkdir -p ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen
mv ~/.passgen.db ~/Library/Mobile\ Documents/com~apple~CloudDocs/PassGen/
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db

# 4. éªŒè¯åŒæ­¥è®¾ç½®
ls -la ~/.passgen.db
readlink ~/.passgen.db
passgen list  # ç¡®è®¤æ•°æ®ä»ç„¶å¯è®¿é—®

# 5. åœ¨å…¶ä»– Mac ä¸Šè®¾ç½®
# é‡è¦ï¼šæ¯å° Mac éƒ½éœ€è¦å•ç‹¬è®¾ç½® Touch ID å’Œé’¥åŒ™ä¸²ï¼Œä½†å¯ä»¥å…±äº«åŒä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶

# æ–¹æ³•1ï¼šç›´æ¥é“¾æ¥åˆ°ç°æœ‰çš„ iCloud æ•°æ®åº“ï¼ˆæ¨èï¼‰
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db
# é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šæç¤º"å­˜å‚¨æ–‡ä»¶ä¸å­˜åœ¨"ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºé’¥åŒ™ä¸²ä¸­è¿˜æ²¡æœ‰ä¸»å¯†ç 

# æ–¹æ³•2ï¼šå…ˆåˆå§‹åŒ–å†æ›¿æ¢ï¼ˆå¦‚æœæ–¹æ³•1ä¸è¡Œï¼‰
passgen init  # è®¾ç½®ä¸»å¯†ç ï¼ˆä¸ç¬¬ä¸€å° Mac ç›¸åŒçš„å¯†ç ï¼‰
rm ~/.passgen.db  # âš ï¸ é‡è¦ï¼šåˆ é™¤ init åˆ›å»ºçš„ç©ºæ•°æ®åº“æ–‡ä»¶
ln -s "$HOME/Library/Mobile Documents/com~apple~CloudDocs/PassGen/.passgen.db" ~/.passgen.db

# éªŒè¯è®¾ç½®
passgen list  # è¾“å…¥ä¸»å¯†ç ï¼ŒTouch ID å°†è‡ªåŠ¨å¯ç”¨
```

## ğŸ” è®¤è¯æµç¨‹

1. **é¦–æ¬¡ä½¿ç”¨**ï¼šè®¾ç½®ä¸»å¯†ç  â†’ è‡ªåŠ¨ä¿å­˜åˆ°é’¥åŒ™ä¸²
2. **åç»­ä½¿ç”¨**ï¼šTouch ID è®¤è¯ â†’ è‡ªåŠ¨è·å–ä¸»å¯†ç  â†’ è§£é”æ•°æ®åº“
3. **è®¤è¯å¤±è´¥**ï¼šè‡ªåŠ¨å›é€€åˆ°å¯†ç è¾“å…¥  
4. **ä¼šè¯ç®¡ç†**ï¼šé…ç½®çš„è¶…æ—¶æ—¶é—´å†…ï¼ˆé»˜è®¤5åˆ†é’Ÿï¼‰æ— éœ€é‡å¤è®¤è¯
5. **é…ç½®åŒ–ç®¡ç†**ï¼šå¯é€šè¿‡ `passgen config` è‡ªå®šä¹‰ä¼šè¯è¶…æ—¶æ—¶é—´

## ğŸ“ ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**ï¼š2.1
- **Python è¦æ±‚**ï¼š3.8+
- **ç³»ç»Ÿè¦æ±‚**ï¼šmacOS 10.13+ ï¼ˆTouch ID åŠŸèƒ½ï¼‰
- **è®¸å¯è¯**ï¼šMIT

### æ›´æ–°æ—¥å¿—

**v2.1 (2024-07-15)**
- âœ… ä¿®å¤ä¼šè¯ç®¡ç†é—®é¢˜ï¼šç°åœ¨ä½¿ç”¨å…¨å±€è®¤è¯å®ä¾‹ï¼Œé¿å…æ¯æ¬¡æ“ä½œéƒ½éœ€è¦ Touch ID è®¤è¯
- âœ… ç®€åŒ–ç”¨æˆ·ç•Œé¢ï¼šç§»é™¤å¤æ‚çš„ ID æ˜¾ç¤ºï¼Œæ”¹ç”¨ç®€å•çš„åºå·æ“ä½œ
- âœ… åˆå¹¶å¿«é€Ÿå¤åˆ¶åŠŸèƒ½åˆ°æœç´¢å‘½ä»¤ï¼š`passgen search -c` 
- âœ… æ–°å¢é…ç½®ç®¡ç†å‘½ä»¤ï¼š`passgen config` æ”¯æŒåŠ¨æ€ä¿®æ”¹ä¼šè¯è¶…æ—¶ç­‰è®¾ç½®
- âœ… æ”¹è¿›å‘½ä»¤æ¥å£ï¼š`passgen edit 1`ã€`passgen delete 2` ç­‰ä½¿ç”¨åºå·æ“ä½œ
- âœ… å¢å¼ºç”¨æˆ·ä½“éªŒï¼šæ›´ç›´è§‚çš„åºå·ç³»ç»Ÿï¼Œå‡å°‘ç”¨æˆ·è®°å¿†è´Ÿæ‹…
- âœ… æ”¹è¿› add å‘½ä»¤ï¼šæˆåŠŸæ·»åŠ å¯†ç åè¯¢é—®æ˜¯å¦ç»§ç»­æ·»åŠ ï¼Œæ”¯æŒæ‰¹é‡æ·»åŠ æ“ä½œ
- âœ… ä¿®å¤ iCloud åŒæ­¥æ–‡æ¡£ï¼šæ›´æ­£è½¯é“¾æ¥åˆ›å»ºæ–¹æ³•ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„é¿å…é“¾æ¥æ–­å¼€

**v2.0**
- Touch ID é›†æˆå’Œå¢å¼ºè®¤è¯ç³»ç»Ÿ
- AES-256 åŠ å¯†å­˜å‚¨
- æ™ºèƒ½å¯†ç ç”Ÿæˆå™¨
- å‘½ä»¤è¡Œç•Œé¢ç»Ÿä¸€

---

ğŸ’¡ **æç¤º**ï¼šé¦–æ¬¡å¯†ç è®¤è¯æˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯ç”¨ Touch IDï¼Œä¹‹ååªéœ€æŒ‡çº¹å³å¯å¿«é€Ÿè®¿é—®å¯†ç åº“ã€‚